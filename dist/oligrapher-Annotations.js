(window.webpackJsonpOligrapher=window.webpackJsonpOligrapher||[]).push([[0],{295:function(e,t,a){"use strict";a.r(t),a.d(t,"Annotations",(function(){return T}));var n=a(1),r=a.n(n),o=a(6),l=a(119),i=a(60),c=a(261),s=a(2),d=a.n(s),u=a(580);function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function p({list:e,currentIndex:t}){const a=Object(o.c)(),l=Object(n.useCallback)(e=>a({type:"SHOW_ANNOTATION",index:e}),[a]),i=Object(n.useCallback)((e,t)=>a({type:"MOVE_ANNOTATION",from:e,to:t}),[a]),c=(e,a)=>"annotation-list-item "+(a?"annotation-list-item-dragging ":" ")+(e===t?"annotation-list-item-current":"");return r.a.createElement(u.a,{onDragEnd:e=>{e.destination&&i(e.source.index,e.destination.index)}},r.a.createElement(u.c,{droppableId:"droppable"},t=>r.a.createElement("div",b({id:"oligrapher-annotations-list"},t.droppableProps,{ref:t.innerRef}),e.map((e,t)=>r.a.createElement(u.b,{key:e.id,draggableId:e.id,index:t},(a,n)=>{return r.a.createElement("div",b({className:c(t,n.isDragging),ref:a.innerRef},a.draggableProps,a.dragHandleProps,{onClick:()=>l(t),style:(n.isDragging,o=a.draggableProps.style,{userSelect:"none",...o})}),t+1,". ",e.header);var o})),t.placeholder)))}p.propTypes={list:d.a.array.isRequired,currentIndex:d.a.number.isRequired};a(43);var m=a(235);function g({annotation:e}){const t=Object(o.c)(),{id:a,text:l}=e,c=l&&l.length>30,[s,d]=Object(n.useState)(!1),u=Object(n.useCallback)(()=>d(!0),[]),b=Object(n.useCallback)(()=>d(!1),[]),p=Object(n.useCallback)(()=>t({type:"REMOVE_ANNOTATION",id:a}),[t,a]),g=Object(n.useCallback)(()=>{p(),d(!1)},[p]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(i.a,{variant:"contained",size:"small",color:"secondary",onClick:c?u:p},"Remove"),r.a.createElement(m.a,{open:s,message:"Are you sure you want to remove this annotation?",cancel:{label:"Cancel",onClick:b},confirm:{label:"Remove",onClick:g}}))}g.propTypes={annotation:d.a.object.isRequired};var O=a(546),h=a(4),E=a(561),C=a.n(E),j=a(562),k=a.n(j);function N({text:e,onChange:t}){const a=Object(n.useCallback)(e=>""===e?null:e,[]),o=Object(n.useCallback)((e,n)=>{t(a(n.getData()))},[t,a]);return r.a.createElement(C.a,{editor:k.a,data:e||"<p></p>",onChange:o,config:{placeholder:"Annotation text",toolbar:["bold","italic","link","bulletedList","numberedList","blockQuote","undo","redo"]}})}function y({annotation:e}){const{id:t,header:a,text:l}=e,c=Object(o.c)(),s=Object(n.useCallback)(e=>{c({type:"UPDATE_ANNOTATION",id:t,attributes:e})},[c,t]),d=Object(n.useCallback)(()=>c({type:"CLEAR_HIGHLIGHTS"}),[c]),u=Object(n.useCallback)(Object(h.b)(e=>s({header:e})),[s]),b=Object(n.useCallback)(e=>s({text:e}),[s]);return r.a.createElement("div",{id:"oligrapher-annotation-form"},r.a.createElement("div",{className:"oligrapher-annotation-form-header"},r.a.createElement(O.a,{id:"oligrapher-annotation-form-header",placeholder:"Annotation header",value:a,onChange:u})),r.a.createElement("div",{className:"oligrapher-annotation-form-text"},r.a.createElement(N,{text:l,onChange:b})),r.a.createElement("div",{className:"oligrapher-annotation-highlighting-tip"},"Press the Control or âŒ˜ key while clicking on nodes, edges, or texts to add or remove highlights from this annotation.",r.a.createElement("br",null),r.a.createElement(i.a,{variant:"outlined",size:"small",onClick:d},"Clear Highlighting")))}N.propTypes={text:d.a.string,onChange:d.a.func.isRequired},y.propTypes={annotation:d.a.object.isRequired};var v=a(262),A=a(263),f=a(264),x=a(11);function T(){const e=Object(o.c)(),t=Object(n.useCallback)(()=>e({type:"CREATE_ANNOTATION"}),[e]),a=Object(o.d)(e=>e.display.modes.editor),{currentIndex:l}=Object(o.d)(e=>e.annotations),s=Object(o.d)(x.b),d=s[l],{storyModeOnly:u}=Object(o.d)(e=>e.attributes.settings),b=Object(n.useCallback)(()=>e({type:"SHOW_ANNOTATION",index:l-1}),[e,l]),m=Object(n.useCallback)(()=>e({type:"SHOW_ANNOTATION",index:l+1}),[e,l]),O=Object(n.useCallback)(t=>e({type:"SHOW_ANNOTATION",index:t}),[e]);return r.a.createElement("div",{id:"oligrapher-annotations"},r.a.createElement("div",{id:"oligrapher-annotations-nav"},a&&r.a.createElement("span",{className:"oligrapher-annotations-header"},"Edit Annotations"),!a&&s.length>1&&r.a.createElement(v.a,{count:s.length,currentIndex:l,prev:b,next:m}),!a&&s.length>1&&r.a.createElement(A.a,{count:s.length,currentIndex:l,show:O}),!u&&r.a.createElement(f.a,null)),!a&&r.a.createElement(c.a,{annotation:d}),a&&r.a.createElement(p,{list:s,currentIndex:l}),r.a.createElement("br",null),a&&r.a.createElement("div",{className:"oligrapher-annotations-actions"},r.a.createElement(i.a,{onClick:t,variant:"outlined",size:"small"},"Add Annotation"),d&&r.a.createElement(g,{annotation:d})),a&&d&&r.a.createElement(y,{annotation:d,key:d.id}))}t.default=Object(l.hot)(T)}}]);